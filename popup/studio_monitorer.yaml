action: call-service
service: browser_mod.popup
service_data:
  title: Monitorer
  deviceID: this
  card:
    type: entities
    state_color: true
    show_header_toggle: false
    entities:
      - entity: switch.wemo_monitors
        secondary_info: last-changed

      - type: custom:slider-entity-row
        entity: media_player.bureau
        hide_state: false
        style: |
          :host {
          --paper-item-icon-color: 
            {% if is_state('binary_sensor.monitors_mute_check', 'on') %} #FFFFFF20;
            {% elif states(config.entity) | int == 0 %} #9da0a2;
            {% elif states(config.entity) | int < 60 %} #3182b7;
            {% else %} red;
            {% endif %}
            }

      - entity: automation.turn_off_monitors

      - entity: automation.eq_calibration

      - type: custom:hui-element
        card_type: horizontal-stack
        style: |
          #root {
            justify-content: space-evenly;
            margin: 1.4em -0.7em 0.7em 0;
          }
        cards:
          - type: custom:button-card
            icon: mdi:volume-mute
            tap_action:
              action: call-service
              service: media_player.volume_mute
              service_data:
                entity_id: >
                  [[[ return entity.entity_id; ]]]
                # is_volume_muted: "[[[ return entity.attributes.is_volume_muted === True ? false : true; ]]]"
                # is_volume_muted: >-
                #   [[[ if (entity.attributes.is_volume_muted === 'true') return false; return true;]]]
                is_volume_muted: true
            template: icon_action
          - type: custom:button-card
            icon: mdi:volume-source
            tap_action:
              action: call-service
              service: media_player.volume_mute
              service_data:
                entity_id: >
                  [[[ return entity.entity_id; ]]]
                # is_volume_muted: "[[[ return entity.attributes.is_volume_muted === true ? false : true; ]]]"
                # is_volume_muted: >-
                #   [[[ if (entity.attributes.is_volume_muted === 'true') return false; return true;]]]
                is_volume_muted: false
            template: icon_action

          - type: custom:button-card
            icon: mdi:volume-minus
            tap_action:
              action: call-service
              service: media_player.volume_down
              service_data:
                entity_id: media_player.bureau
            template: icon_action

          - type: custom:button-card
            icon: mdi:volume-plus
            tap_action:
              action: call-service
              service: media_player.volume_up
              service_data:
                entity_id: media_player.bureau
            template: icon_action
