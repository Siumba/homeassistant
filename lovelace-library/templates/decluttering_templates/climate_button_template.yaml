climate_button:
  default:
    - cust_1_field: "[[[
        if (entity.state == 'cool')
        return 'Cooling to ' + entity.attributes.temperature + '°';
        else if (entity.state == 'heat')
        return 'Heating to ' + entity.attributes.temperature + '°';
        else
        return entity.state;
        ]]]"
    - temperature_entity: "[[[ return Math.round(entity.attributes.current_temperature) + '°' ]]]"
    - cool_color: var(--sensibo-cool-color)
    - heat_color: var(--sensibo-heat-color)
    - text_on_color: var(--primary-text-color)
    - icon_on_color: var(--primary-text-color)

  card:
    type: custom:decluttering-card
    template: text_button_two_rows
    variables:
      - entity: "climate.[[name]]"
      - text_field: "[[temperature_entity]]"
      - name: "[[title]]"
      - cust_1_field: "[[cust_1_field]]"
      - cust_2_field: "[[cust_2_field]]"
      # - tap_action:
      #     #haptic: light
      #     action: call-service
      #     service: "[[[
      #         if ( entity.state == 'off')
      #           return 'climate.turn_on';
      #         else
      #           return 'climate.turn_off';
      #       ]]]"
      #     service_data:
      #       entity_id: 'climate.[[name]]'
      - hold_action:
          action: none
      - tap_action:
          #haptic: heavy
          action: fire-dom-event
          browser_mod:
            command: popup
            hide_header: false
            title: "[[title]] AC"

            card:
              type: custom:decluttering-card
              template: climate_ac_popup
              variables:
                - name: "[[name]]"
